<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                xmlns:pe="http://primefaces.org/ui/extensions"
                template="/WEB-INF/layouts/standard.xhtml">

    <ui:define name="title">It's time to play the game of dice!</ui:define>

    <ui:define name="notes">
    </ui:define>

    <ui:define name="content">
        <h:form id="mainForm">

            <p:layout style="width: 100%;" id="layout">
                <p:layoutUnit position="north" id="gameStatus" style="text-align: center; overflow: hidden"
                              header="Game Status">
                    <p:panel>
                        <h:outputText value="Rounds Played: " style="font-size: 120%"/>
                        <p:spacer width="20" height="0"/>
                        <h:outputText id="roundsPlayed" value="#{webFlowController.getRoundsPlayed()}"
                                      style="font-size: 120%; font-style: oblique; font-family: cursive"/>
                        <p:spacer width="40" height="0"/>
                        <h:outputText value="Active Player: " style="font-size: 120%"/>
                        <p:spacer width="20" height="0"/>
                        <h:outputText id="activePlayer" value="#{webFlowController.getActivePlayer().getName()}"
                                      style="font-size: 120%; font-style: oblique;
                            font-family: cursive"/>
                        <p:spacer width="60" height="0"/>
                        <p:commandLink ajax="false" action="done" value="Exit" immediate="true"/>
                    </p:panel>
                </p:layoutUnit>

                <p:layoutUnit id="diceArea" position="west" style="overflow-x: hidden; width: 100%;
                    text-align: center;"
                              header="Dice Box">
                    <p:panelGrid columns="1" style="overflow-x: hidden; text-align: center" >
                        <h:outputText value="Rolls left:" style="text-align: center; font-size: 120%" />
                        <h:outputText value="3" id="rollsLeft" style="font-size: 300%; font-style: oblique;
                            font-family: cursive; text-align: center"/>
                        <h:outputLabel for="freezingChoice" value="Check to freeze:" style="font-size: 70%"/>
                        <p:selectManyCheckbox id="freezingChoice" layout="pageDirection" value="#{diceBoxController.frozenDices}">
                            <f:selectItems value="#{diceBoxController.dices}"/>
                        </p:selectManyCheckbox>
                        <p:commandButton value="Roll" id="rollButton"/>
                    </p:panelGrid>
                </p:layoutUnit>
                <p:layoutUnit id="scoreArea" position="center" header="Score Board"
                    style="text-align: center; margin-left: 30px; width: 100%">
                    <p:panel>
                        <p:dataTable value="#{figureManager.values()}" var="figure" rowIndexVar="rowID"
                                style="width: #{webFlowController.getPlayersCount()*50+200}px !important; border-collapse: separate; border-spacing: 10px;">
                            <p:column headerText="Figures" style="width: 200px; font-size: 80%">
                                <p:outputLabel value="#{figure.toString()}"/>
                            </p:column>
                            <p:columns value="#{webFlowController.players}" var="player" headerText="#{player.getName()}"
                                    style="width: 50px; font-size: 80%" columnIndexVar="colID">
                                <p:outputLabel value="#{player.getScore(figure)}" rendered="#{player.score.isUsed(figure)}"/>
                                <!--here goes controller.getStockForUserAndFigure!-->
                                <p:commandButton value="#{scoreController.getStock(figure)}"
                                                 rendered="#{not player.score.isUsed(figure) and webFlowController.isPlayerRound(player)}"
                                                 actionListener="#{scoreController.submitScore(player, figure)}"/>
                                <p:outputLabel value="-"
                                               rendered="#{not webFlowController.isPlayerRound(player) and not player.score.isUsed(figure)}"/>
                            </p:columns>
                        </p:dataTable>
                    </p:panel>
                </p:layoutUnit>

            </p:layout>


        </h:form>

    </ui:define>

</ui:composition>